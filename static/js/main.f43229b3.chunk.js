(this["webpackJsonpsn-ts"]=this["webpackJsonpsn-ts"]||[]).push([[0],{13:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__3tpU9",dialogsItems:"Dialogs_dialogsItems__ienY8",messages:"Dialogs_messages__3m0ZH",message:"Dialogs_message__3pa39",item:"Dialogs_item__2lstC",ActiveItem:"Dialogs_ActiveItem__tWhqB"}},16:function(e,t,s){},29:function(e,t,s){e.exports={photo:"Users_photo__qY-Gi",selectedPage:"Users_selectedPage__mzLTp"}},31:function(e,t,s){e.exports={header:"Header_header__1riTh",loginBlock:"Header_loginBlock__2AF6M"}},47:function(e,t,s){},48:function(e,t,s){e.exports={info:"ProfileInfo_info__1Kbs0"}},49:function(e,t,s){e.exports={item:"Post_item__3RXIq"}},5:function(e,t,s){e.exports={nav:"NavBar_nav__1i1C_",item:"NavBar_item__1iqZI",ActiveItem:"NavBar_ActiveItem__2m0l5"}},57:function(e,t,s){},58:function(e,t,s){},83:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),i=s(17),a=s.n(i),r=(s(57),s(58),s(4)),o=s(5),l=s.n(o),u=s(0),j=function(){return Object(u.jsxs)("div",{className:l.a.nav,children:[Object(u.jsx)("div",{children:Object(u.jsx)(r.b,{to:"/profile",activeClassName:l.a.ActiveItem,className:l.a.item,children:"Profile"})}),Object(u.jsx)("div",{children:Object(u.jsx)(r.b,{to:"/dialogs",activeClassName:l.a.ActiveItem,className:l.a.item,children:"Messages"})}),Object(u.jsx)("div",{children:Object(u.jsx)(r.b,{to:"/news",activeClassName:l.a.ActiveItem,className:l.a.item,children:"News"})}),Object(u.jsx)("div",{children:Object(u.jsx)(r.b,{to:"/users",activeClassName:l.a.ActiveItem,className:l.a.item,children:"Users"})}),Object(u.jsx)("div",{children:Object(u.jsx)(r.b,{to:"/music",activeClassName:l.a.ActiveItem,className:l.a.item,children:"Music"})}),Object(u.jsx)("div",{children:Object(u.jsx)(r.b,{to:"settings",activeClassName:l.a.ActiveItem,className:l.a.item,children:"Settings"})})]})},d=s(2),b=function(){return Object(u.jsx)("span",{children:"News"})},g=function(){return Object(u.jsx)("span",{children:"Settings"})},O=function(){return Object(u.jsx)("span",{children:"Music"})},h=s(95),f=s(22),p=s(3),m=s(42),x=s.n(m).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ba5cecd6-1162-4b9f-80a1-8473e46fd1a8"}}),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return x.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},P=function(e){return x.post("follow/".concat(e),{}).then((function(e){return e.data}))},w=function(e){return x.delete("follow/".concat(e)).then((function(e){return e.data}))},S=function(e){return x.get("profile/"+e)},T=function(){return x.get("auth/me").then((function(e){return e.data}))},C={posts:[{message:"\u042f \u0440\u0443\u0441\u0441\u043a\u0438\u0439",id:Object(h.a)(),likesCount:12},{message:"I am not Russian",id:Object(h.a)(),likesCount:1},{message:"I am learn React",id:Object(h.a)(),likesCount:23}],newPostText:"",profile:null},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var s={message:e.newPostText,id:Object(h.a)(),likesCount:0},n=Object(p.a)({},e);return n.posts=Object(f.a)(e.posts),n.posts.push(s),n.newPostText="",n;case"UPDATE-NEW-POST-TEXT":var c=Object(p.a)({},e);return c.newPostText=t.NewText,c;case"SET-USER-PROFILE":return Object(p.a)(Object(p.a)({},e),{},{profile:t.profile});default:return e}},E={dialogsData:[{id:Object(h.a)(),name:"Sasha"},{id:Object(h.a)(),name:"Viktor"},{id:Object(h.a)(),name:"Lesha"},{id:Object(h.a)(),name:"Elena"},{id:Object(h.a)(),name:"Dima"},{id:Object(h.a)(),name:"Ivan"}],messagesData:[{message:"Hi",id:Object(h.a)()},{message:"How are you?",id:Object(h.a)()},{message:"Lets drink beer today",id:Object(h.a)()}],newMessageText:""},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE-NEW-MESSAGE-TEXT":return e.newMessageText=t.body,Object(p.a)({},e);case"SEND-MESSAGE":var s=e.newMessageText;return e.messagesData.push({message:s,id:Object(h.a)()}),e.newMessageText="",Object(p.a)({},e);default:return e}},I={},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;return e},_=(Object(h.a)(),Object(h.a)(),Object(h.a)(),Object(h.a)(),Object(h.a)(),Object(h.a)(),Object(h.a)(),Object(h.a)(),Object(h.a)(),Object(h.a)(),Object(h.a)(),Object(h.a)(),function(e){return{type:"UPDATE-NEW-POST-TEXT",NewText:e}}),F=s(13),D=s.n(F),y=function(e){return Object(u.jsx)("div",{children:Object(u.jsxs)(r.b,{className:D.a.item,activeClassName:D.a.ActiveItem,to:"/dialogs/"+e.id,children:[e.name," "]})})},k=function(e){return Object(u.jsx)("div",{className:D.a.message,children:e.message})},L=function(e){var t=e.dialogsData.map((function(e){return Object(u.jsx)(y,{name:e.name,id:e.id},e.id)})),s=e.messagesData.map((function(e){return Object(u.jsx)(k,{message:e.message},e.id)})),n=e.newMessageText;return e.isAuth?Object(u.jsxs)("div",{className:D.a.dialogs,children:[Object(u.jsx)("div",{className:D.a.dialogsItems,children:t}),Object(u.jsxs)("div",{className:D.a.messages,children:[Object(u.jsx)("div",{children:s}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsx)("textarea",{value:n,onChange:function(t){e.onNewMessageChange(t.currentTarget.value)},placeholder:"Enter your message"})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{onClick:function(){e.onSendMessageClick()},children:"Send"})})]})]})]}):Object(u.jsx)(d.a,{to:"/login"})},M=s(8),R=Object(M.b)((function(e){return{dialogsData:e.DialogsPage.dialogsData,messagesData:e.DialogsPage.messagesData,newMessageText:e.DialogsPage.newMessageText,isAuth:e.Auth.isAuth}}),(function(e){return{onNewMessageChange:function(t){e({type:"UPDATE-NEW-MESSAGE-TEXT",body:t})},onSendMessageClick:function(){e({type:"SEND-MESSAGE"})}}}))(L),G=s(19),W=s(20),B=s(24),z=s(23),H={users:[],PageSize:100,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},q=function(e){return{type:"FOLLOW",UserId:e}},X=function(e){return{type:"UNFOLLOW",UserId:e}},J=function(e){return{type:"SET-USERS",users:e}},Y=function(e){return{type:"SET-TOTAL-USERS-COUNT",usersCount:e}},K=function(e){return{type:"TOGGLE-IS-FETCHING ",isFetching:e}},Z=function(e,t){return{type:"TOGGLE-IS-FOLLOWING-PROGRESS",isFetching:e,userId:t}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":var s=Object(p.a)(Object(p.a)({},e),{},{users:e.users.map((function(e){return e.id===t.UserId?Object(p.a)(Object(p.a)({},e),{},{followed:!0}):e}))});return s;case"UNFOLLOW":var n=Object(p.a)(Object(p.a)({},e),{},{users:e.users.map((function(e){return e.id===t.UserId?Object(p.a)(Object(p.a)({},e),{},{followed:!1}):e}))});return n;case"SET-USERS":return Object(p.a)(Object(p.a)({},e),{},{users:t.users});case"SET-CURRENT-PAGE":return Object(p.a)(Object(p.a)({},e),{},{currentPage:t.Page});case"SET-TOTAL-USERS-COUNT":return Object(p.a)(Object(p.a)({},e),{},{totalUsersCount:t.usersCount});case"TOGGLE-IS-FETCHING ":return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE-IS-FOLLOWING-PROGRESS":return Object(p.a)(Object(p.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(f.a)(e.followingInProgress),[t.userId]):[e.followingInProgress.filter((function(e){return e!=t.userId}))]});default:return e}},Q=s.p+"static/media/user-png-image-9.ab7efdc7.png",$=s(29),ee=s.n($),te=function(e){for(var t=Math.ceil(e.totalUsersCount/e.PageSize),s=[],n=1;n<=t;n++)s.push(n);return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:s.map((function(t){return Object(u.jsx)("span",{onClick:function(s){e.onPageChanged(t)},className:e.currentPage===t?ee.a.selectedPage:"",children:t})}))}),e.users.map((function(t){return Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:Object(u.jsx)("div",{children:Object(u.jsx)(r.b,{to:"/profile/"+t.id,children:Object(u.jsx)("img",{src:null!=t.photos.small?t.photos.small:Q,className:ee.a.photo})})})}),Object(u.jsx)("span",{children:Object(u.jsx)("div",{children:t.followed?Object(u.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unFollow(t.id)},children:"Unfollow"}):Object(u.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})})}),Object(u.jsxs)("span",{children:[Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:t.name}),Object(u.jsx)("div",{children:t.status})]}),Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:"u.location.city"}),Object(u.jsx)("div",{children:"u.location.country"})]})]})]},t.id)}))]})},se=s(94),ne=function(e){Object(B.a)(s,e);var t=Object(z.a)(s);function s(){var e;Object(G.a)(this,s);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).onPageChanged=function(t){e.props.getUsers(t,e.props.PageSize),e.props.setCurrentPage(t)},e}return Object(W.a)(s,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.PageSize)}},{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[this.props.isFetching?Object(u.jsx)(se.a,{}):null,Object(u.jsx)(te,{users:this.props.users,setUsers:this.props.setUsers,currentPage:this.props.currentPage,isFetching:this.props.isFetching,followingInProgress:this.props.followingInProgress,followSuccess:this.props.followSuccess,PageSize:this.props.PageSize,setTotalUsersCount:this.props.setTotalUsersCount,setCurrentPage:this.props.setCurrentPage,totalUsersCount:this.props.totalUsersCount,unFollowSuccess:this.props.unFollowSuccess,onPageChanged:this.onPageChanged,toggleFollowingProgress:this.props.toggleFollowingProgress,follow:this.props.follow,unFollow:this.props.unFollow})]})}}]),s}(c.a.Component),ce=Object(M.b)((function(e){return{users:e.UsersPage.users,PageSize:e.UsersPage.PageSize,totalUsersCount:e.UsersPage.totalUsersCount,currentPage:e.UsersPage.currentPage,isFetching:e.UsersPage.isFetching,followingInProgress:e.UsersPage.followingInProgress}}),{followSuccess:q,unFollowSuccess:X,setUsers:J,setCurrentPage:function(e){return{type:"SET-CURRENT-PAGE",Page:e}},setTotalUsersCount:Y,toggleIsFetching:K,toggleFollowingProgress:Z,getUsers:function(e,t){return function(s){s(K(!0)),v(e,t).then((function(e){s(K(!1)),s(J(e.items)),s(Y(e.totalCount))}))}},unFollow:function(e){return function(t){t(Z(!0,e)),w(e).then((function(s){0===s.resultCode&&t(X(e)),t(Z(!1,e))}))}},follow:function(e){return function(t){t(Z(!0,e)),P(e).then((function(s){0===s.resultCode&&t(q(e)),t(Z(!1,e))}))}}})(ne),ie=s(47),ae=s.n(ie),re=s(48),oe=s.n(re),le=function(e){return e.profile?Object(u.jsxs)("div",{className:oe.a.info,children:[Object(u.jsxs)("div",{children:[" ",e.profile.fullName]}),Object(u.jsx)("img",{src:e.profile.photos.large,alt:""}),Object(u.jsx)("div",{children:Object(u.jsx)("span",{children:e.profile.aboutMe})}),e.profile.lookingForAJob?Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443"})," ",Object(u.jsx)("div",{children:Object(u.jsx)("span",{children:e.profile.lookingForAJobDescription})})]}):Object(u.jsx)("span",{children:"\u041d\u0435 \u0438\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443"})]}):Object(u.jsx)(se.a,{color:"secondary"})},ue=s(16),je=s.n(ue),de=s(49),be=s.n(de),ge=function(e){return Object(u.jsxs)("div",{className:be.a.item,children:[Object(u.jsx)("img",{src:"https://i.pinimg.com/236x/74/05/5f/74055f83bfbdc20fdc1f9d1fc116fd26.jpg"}),e.message,Object(u.jsx)("br",{}),e.likesCount," likes"]})},Oe=function(e){var t=e.posts.map((function(e){return Object(u.jsx)(ge,{message:e.message,likesCount:e.likesCount})})),s=c.a.createRef();return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:je.a.title,children:"My Posts"}),Object(u.jsx)("div",{className:je.a.area,children:Object(u.jsx)("textarea",{onChange:function(t){e.updateNewPostText(t.currentTarget.value)},value:e.newPostText,ref:s})}),Object(u.jsx)("div",{className:je.a.addButton,children:Object(u.jsx)("button",{onClick:function(){e.addPost()},children:"Add Post"})}),Object(u.jsx)("div",{className:je.a.posts,children:t})]})},he=Object(M.b)((function(e){return{posts:e.ProfilePage.posts,newPostText:e.ProfilePage.newPostText}}),(function(e){return{addPost:function(){e({type:"ADD-POST"})},updateNewPostText:function(t){e(_(t||""))}}}))(Oe),fe=function(e){return Object(u.jsxs)("div",{className:ae.a.content,children:[Object(u.jsx)(le,{profile:e.profile}),Object(u.jsx)(he,{})]})},pe=Object(d.f)((function(e){return Object(n.useEffect)((function(){var t=e.match.params.userId;e.getUserProfile(t)}),[]),e.isAuth?Object(u.jsx)(fe,{profile:e.profile}):Object(u.jsx)(d.a,{to:"/login"})})),me=Object(M.b)((function(e){return{profile:e.ProfilePage.profile,isAuth:e.Auth.isAuth}}),{getUserProfile:function(e){return function(t){S(e).then((function(e){t({type:"SET-USER-PROFILE",profile:e.data})}))}}})(pe),xe=s(31),ve=s.n(xe),Pe=function(e){return Object(u.jsxs)("div",{className:ve.a.header,children:[Object(u.jsx)("img",{src:"https://cdn.logo.com/hotlink-ok/logo-social-sq.png"}),Object(u.jsx)("div",{className:ve.a.loginBlock,children:e.isAuth?e.login:Object(u.jsx)(r.b,{to:"/login",children:"Login"})})]})},we={userId:null,email:"null",login:"null",isFetching:!1,isAuth:!1},Se=function(e,t,s){return{type:"SET-USER-DATA",data:{userId:e,email:t,login:s}}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":return Object(p.a)(Object(p.a)(Object(p.a)({},e),t.data),{},{isAuth:!0});default:return e}},Ce=function(e){Object(B.a)(s,e);var t=Object(z.a)(s);function s(){return Object(G.a)(this,s),t.apply(this,arguments)}return Object(W.a)(s,[{key:"componentDidMount",value:function(){this.props.Auth()}},{key:"render",value:function(){return Object(u.jsx)(Pe,{isAuth:this.props.isAuth,login:this.props.login})}}]),s}(c.a.Component),Ne=Object(M.b)((function(e){return{isAuth:e.Auth.isAuth,login:e.Auth.login}}),{setAuthUserData:Se,Auth:function(){return function(e){T().then((function(t){if(0===t.resultCode){var s=t.data,n=s.id,c=s.email,i=s.login;e(Se(n,c,i))}}))}}})(Ce),Ee=function(e){return Object(u.jsx)("h1",{children:"Login"})};var Ae=function(e){return e.store.getState(),Object(u.jsx)(r.a,{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(Ne,{}),Object(u.jsx)(j,{}),Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)(d.b,{path:"/profile/:userId?",render:function(){return Object(u.jsx)(me,{})}}),Object(u.jsx)(d.b,{path:"/dialogs",render:function(){return Object(u.jsx)(R,{})}}),Object(u.jsx)(d.b,{path:"/news",render:function(){return Object(u.jsx)(b,{})}}),Object(u.jsx)(d.b,{path:"/users",render:function(){return Object(u.jsx)(ce,{})}}),Object(u.jsx)(d.b,{path:"/music",render:function(){return Object(u.jsx)(O,{})}}),Object(u.jsx)(d.b,{path:"/settings",render:function(){return Object(u.jsx)(g,{})}}),Object(u.jsx)(d.b,{path:"/login",render:function(){return Object(u.jsx)(Ee,{})}})]})]})})},Ie=s(25),Ue=s(50),_e=Object(Ie.b)({ProfilePage:N,DialogsPage:A,UsersPage:V,SideBar:U,Auth:Te}),Fe=Object(Ie.c)(_e,Object(Ie.a)(Ue.a));a.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(M.a,{store:Fe,children:Object(u.jsx)(Ae,{dispatch:Fe.dispatch.bind(Fe),store:Fe})})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.f43229b3.chunk.js.map